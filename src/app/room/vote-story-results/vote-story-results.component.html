<h2>Vote results</h2>
<h3>Story: "{{room.gameState.story}}"</h3>

<div *ngFor="let pickedCard of room.gameState.storyCardPile" class="voteColumn">
    <app-card-picker [cards]="[pickedCard.cardId]" [isEnabled]="false"
        [class.selectedCard]="pickedCard.userInfo.id === room.gameState.storyTeller.id"
        [selectedCard]="room.localState.myVotedCardId === pickedCard.cardId && pickedCard.userInfo.id !== room.gameState.storyTeller.id ? pickedCard.cardId : null">
    </app-card-picker>
    <br />
    <span *ngIf="pickedCard.userInfo.id === room.gameState.storyTeller.id">[STORY TELLER]<br /></span>
    <span class="cardOwner">By: {{pickedCard.userInfo.name}}</span>
    <br />
    Votes ({{room.localState.votesByCardId[pickedCard.cardId]?.length || "0"}}):
    <span
        *ngFor="let user of room.localState.votesByCardId[pickedCard.cardId]; let i = index">{{i > 0 ? ', ' : ''}}{{user.name}}</span>
</div>

<ul>
    <li *ngFor="let vote of room.gameState.votePoints">
        {{vote.userInfo.name}}: +{{vote.points}} for {{vote.reason}}
    </li>
</ul>

<app-ready-button [isEnabled]="!room.myState.isReady"></app-ready-button>